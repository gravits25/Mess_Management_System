<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mess Management System</title>

    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
</head>
<body>

    <div id="header">
        <h5>SEARCH</h5>
      </div>

    <div id="tables">
        <label for="table">Choose a table</label>
        <select name="table" id="table" form="form">
            <optgroup label="Person">
                <option value="student">Student</option>
                <option value="staff">Staff</option>
                <option value="outsider">Outsider</option>
            </optgroup>
            <option value="fees">Fees</option>
            <option value="fees1">Fees1</option>
            <option value="fees2">Fees2</option>
            <option value="fees3">Fees3</option>
            <option value="inventory">Inventory</option>
            <option value="menu">Menu</option>
            <option value="mess_staff">Mess Staff</option>
            <optgroup label="Mess Staff">
                <option value="manager">Manager</option>
                <option value="distributer">Distributer</option>
                <option value="cleaner">Cleaner</option>
                <option value="cook">Cook</option>
              </optgroup>
            </select></option>
        </select>
        <form action="/search/query" id="form" method="get">
            <input type="submit">
        </form>
    </div>

    <h3><%= name%></h3>
    
    
    <div id="field">

        <label for="fields">Search by:  </label>
            <select name="field" id="fields" form="form1">
                <!-- <option>name</option> -->
            <% for (let i = 0; i < columns.length; i ++) { %> -->
                <% if(columns[i].name !=="password") { %>
                <option><%=columns[i].name%></option>
            <% } %>
            <% } %>
        </select>
        <form method="post" action="/search/query?table=<%=name%>&attribute=none" id="form1" >
            <!-- <br> -->
            <input type="submit">
        </form>
        <!-- <br> -->
    </div>
    <div id="sub">
        
        <% if(attribute!=='') { %>
            <form action="/search/query/?table=<%=name%>&attribute=<%=attribute%>" method="post">
            <% if(attribute==="date"||attribute==='dob') { %>
                <input name="value" type="date">
            <% }else { %>
                <input name="value" type="text" placeholder="<%= attribute%>">

            <% } %>
            <br>
            <div class="insub">
            <input type="submit">
        </div>  
        </form>
            <% } %>
    </div>
    <br>

    <div id="relation">
        <table style="border: 1px solid" >
            <tr style="border: 2px solid black">
                <% for (let i = 0; i < excol.length; i ++) { %>
                    <th style="border: 1px solid; background-color: rgb(23, 152, 226);" ><%= excol[i].name%></th>
                <% } %>
            </tr>
            <% for (let i = 0; i < extup.length; i ++ ) { %>
                <tr>
                    <% for (let val in tuples[i]) { %>
                        <% if(i%2===0) { %>
                        <td style="border: 1px solid;background-color: white;"><%= extup[i][val] %></td>
                        <%} else {%>
                        <td style="border: 1px solid;background-color: rgb(198, 242, 242);"><%= extup[i][val] %></td>
                        <%}%>
                    <% } %>
                </tr>
            <% } %>
    
    </div>

</body>
</html>